# 6ì¥ ì½”ë£¨í‹´ ë¹Œë”

ì¤‘ë‹¨ í•¨ìˆ˜ëŠ” ì»¨í‹°ë‰´ì—ì´ì…˜ ê°ì²´ë¥¼ ë‹¤ë¥¸ ì¤‘ë‹¨ í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•œë‹¤.

â†’ ì¤‘ë‹¨ í•¨ìˆ˜ê°€ ì¼ë°˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ê°€ëŠ¥, ì¼ë°˜ í•¨ìˆ˜ê°€ ì¤‘ë‹¨ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥

```kotlin
suspend fun suspendingFun() {
	normalFun()
}

fun normalFun() {
	// suspendingFun() í˜¸ì¶œ ë¶ˆê°€ëŠ¥
}
```

ëª¨ë“  ì¤‘ë‹¨ í•¨ìˆ˜ëŠ” ë˜ ë‹¤ë¥¸ ì¤‘ë‹¨ í•¨ìˆ˜ì— ì˜í•´ í˜¸ì¶œë˜ì–´ì•¼ í•œë‹¤.

> **ì½”ë£¨í‹´ ë¹Œë”**

ì¤‘ë‹¨ í•¨ìˆ˜ë¥¼ ì—°ì†ìœ¼ë¡œ í˜¸ì¶œí•˜ë©´ ì‹œì‘ë˜ëŠ” ì§€ì ì˜ ì—­í• , ì¼ë°˜ í•¨ìˆ˜ì™€ ì¤‘ë‹¨ ê°€ëŠ¥í•œ ì„¸ê³„ë¥¼ ì—°ê²° ì‹œí‚¤ëŠ” ë‹¤ë¦¬

launch, runBlocking, async
>

## launch ë¹Œë”

ì‘ë™ ë°©ì‹

- thread í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒˆë¡œìš´ ìŠ¤ë ˆë“œë¥¼ ì‹œì‘í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹¤.
- ì½”ë£¨í‹´ì„ ì‹œì‘í•˜ë©´ ë³„ê°œë¡œ ì‹¤í–‰ëœë‹¤.
- ë°ëª¬ìŠ¤ë ˆë“œì™€ ì–´ëŠ ì •ë„ ë¹„ìŠ·í•˜ì§€ë§Œ í›¨ì”¬ ê°€ë³ë‹¤.

> ë°ëª¬ ìŠ¤ë ˆë“œ

ë°±ê·¸ë¼ìš´ë“œì—ì„œ ëŒì•„ê°€ë©°, ìš°ì„  ìˆœìœ„ê°€ ë‚®ì€ ìŠ¤ë ˆë“œ
í”„ë¡œê·¸ë¨ì´ ëë‚˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ì—†ë‹¤.
> 

```kotlin
fun main() {
	GlobalScope.launch {
		delay(1000L)
		println("World!")
	}
	GlobalScope.launch {
		delay(1000L)
		println("World!")
	}
	GlobalScope.launch {
		delay(1000L)
		println("World!")
	}
	println("Hello,")
	Thread.sleep(2000L)
}
// Hello,
// (1ì´ˆ í›„)
// World!
// World! 
// World!
```

**launch í•¨ìˆ˜**

- CoroutineScope ì¸í„°í˜ì´ìŠ¤ì˜ í™•ì¥ í•¨ìˆ˜

> CoroutineScope ì¸í„°í˜ì´ìŠ¤

ë¶€ëª¨ ì½”ë£¨í‹´ê³¼ ìì‹ ì½”ë£¨í‹´ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì •ë¦½í•˜ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” **êµ¬ì¡°í™”ëœ ë™ì‹œì„±(structued concurrency)**ì˜ í•µì‹¬
> 

<aside>
â˜ ï¸ GlobalScope ì‚¬ìš©ì„ ì§€ì–‘í•´ì•¼í•œë‹¤.

</aside>

main í•¨ìˆ˜ ëì— Thread.sleep í˜¸ì¶œ

- ìŠ¤ë ˆë“œë¥¼ ì ë“¤ê²Œ í•˜ì§€ ì•Šìœ¼ë©´ ë©”ì¸ í•¨ìˆ˜ëŠ” ì½”ë£¨í‹´ì„ ì‹¤í–‰í•˜ìë§ˆì ëë‚˜ë²„ë¦¬ê²Œ ë˜ë©°, ì½”ë£¨í‹´ì´ ì¼ì„ í•  ê¸°íšŒì¡°ì°¨ ì£¼ì§€ ì•ŠëŠ”ë‹¤.
- delay â†’ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡ì‹œí‚¤ì§€ ì•Šê³  ì½”ë£¨í‹´ì„ ì¤‘ë‹¨
    - ì •í•´ì§„ ì‹œê°„ ë’¤ì— ì¬ê°œí•˜ê¸° ìœ„í•œ íƒ€ì´ë¨¸ë§Œ ì„¤ì •í•œ ë’¤ ê·¸ ì‹œê°„ë™ì•ˆ ì½”ë£¨í‹´ì˜ ì‹¤í–‰ì„ ë©ˆì¶˜ë‹¤.
- ë¸”ë¡œí‚¹ ëœ ìŠ¤ë ˆë“œë¥¼ ìœ ì§€í•˜ëŠ” ê±´ ë¹„ìš©ì´ ë“œëŠ” ì¼ì´ì§€ë§Œ ì¤‘ë‹¨ëœ ì½”ë£¨í‹´ì„ ìœ ì§€í•˜ëŠ” ê±´ ê³µì§œë‚˜ ë‹¤ë¦„ ì—†ë‹¤.

```kotlin
fun main() {
	thread(isDaemon = true) {
		Thread.sleep(1000L)
		println("World!")
	}
	thread(isDaemon = true) {
		Thread.sleep(1000L)
		println("World!")
	}
	thread(isDaemon = true) {
		Thread.sleep(1000L)
		println("World!")
	}
	println("Hello,")
	Thread.sleep(2000L)
}
```

## runBlocking ë¹Œë”

**ì½”ë£¨í‹´ì´ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡œí‚¹í•˜ì§€ ì•Šê³  ì‘ì—…ì„ ì¤‘ë‹¨ì‹œí‚¤ê¸°ë§Œ í•˜ëŠ” ê²ƒ**ì´ ì¼ë°˜ì ì¸ ë²•ì¹™

ë¸”ë¡œí‚¹ì´ í•„ìš”í•œ ê²½ìš°ì— runBlockingì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

**runBlocking ë¹Œë”** 

- ì½”ë£¨í‹´ ë¹Œë”
- ì½”ë£¨í‹´ì´ ì¤‘ë‹¨ë˜ì—ˆì„ ê²½ìš° ì¤‘ë‹¨ ë©”ì¸ í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì‹œì‘í•œ ìŠ¤ë ˆë“œë¥¼ ì¤‘ë‹¨ì‹œí‚¨ë‹¤.
- runBlocking ë‚´ë¶€ì—ì„œ delay í˜¸ì¶œí•˜ë©´ Thread.sleepê³¼ ë¹„ìŠ·í•˜ê²Œ ì‘ë™í•œë‹¤.

```kotlin
fun main() {
	runBlocking {
		delay(1000L)
		println("World!")
	}
	runBlocking {
		delay(1000L)
		println("World!")
	}
	runBlocking {
		delay(1000L)
		println("World!")
	}
	println("Hello,")
}
// (1ì´ˆ í›„)
// World!
// (1ì´ˆ í›„)
// World!
// (1ì´ˆ í›„)
// World!
// Hello,
```

```kotlin
fun main() {
	Thread.sleep(1000L)
	println("World!")
	Thread.sleep(1000L)
	println("World!")
	Thread.sleep(1000L)
	println("World!")
	println("Hello,")
}	
// (1ì´ˆ í›„)
// World!
// (1ì´ˆ í›„)
// World!
// (1ì´ˆ í›„)
// World!
// Hello,
```

**runBlockingì´ ì‚¬ìš©ë˜ëŠ” íŠ¹ìˆ˜í•œ ê²½ìš°**

- í”„ë¡œê·¸ë¨ì´ ëë‚˜ëŠ” ê±¸ ë°©ì§€í•˜ê¸° ìœ„í•´ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡œí‚¹í•  í•„ìš”ê°€ ìˆëŠ” ë©”ì¸ í•¨ìˆ˜
    
    ```kotlin
    fun main = runBlocking {
    }
    ```
    
- í”„ë¡œê·¸ë¨ì´ ëë‚˜ëŠ” ê±¸ ë°©ì§€í•˜ê¸° ìœ„í•´ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡œí‚¹í•  í•„ìš”ê°€ ìˆëŠ” ìœ ë‹› í…ŒìŠ¤íŠ¸
    
    ```kotlin
    class MyTests {
    	
    	@Test
    	fun `a test`() = runBlocking {
    	}
    }
    ```
    

```kotlin
fun main() = runBlocking {
    GlobalScope.launch {
        delay(1000L)
        println("World!")
    }
    GlobalScope.launch {
        delay(1000L)
        println("World!")
    }
    GlobalScope.launch {
        delay(1000L)
        println("World!")
    }
    println("Hello,")
		delay(2000L) // ì—¬ì „íˆ í•„ìš”í•˜ë‹¤. 
}
```

```kotlin
fun main() = runBlocking {
    launch {
        delay(1000L)
        println("World!")
    }
    launch {
        delay(1000L)
        println("World!")
    }
    launch {
        delay(1000L)
        println("World!")
    }
    println("Hello,")
		// delayë¥¼ í•´ì£¼ì§€ ì•Šì•„ë„ ë¨
		// why?
}
```

<aside>
âš ï¸ runBlockingì€ í˜„ì¬ëŠ” ê±°ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.

</aside>

ë©”ì¸ í•¨ìˆ˜ëŠ” runBlocking ëŒ€ì‹ ì— suspendë¥¼ ë¶™ì—¬ ì¤‘ë‹¨ í•¨ìˆ˜ë¡œ ë§Œë“œëŠ” ë°©ë²•ì„ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.

```kotlin
suspend fun main() {
	GlobalScope.launch {
		delay(1000L)
		println("World!")
	}
	GlobalScope.launch {
    delay(1000L)
    println("World!")
  }
  GlobalScope.launch {
    delay(1000L)
    println("World!")
  }
  println("Hello,")
	delay(2000L)
}
// Hello,
// (1ì´ˆ í›„)
// World!
// World!
// World!
```

## async ë¹Œë”

**async ë¹Œë”**

- launchì™€ ë¹„ìŠ·
- **ëŒë‹¤ í‘œí˜„ì‹ì— ì˜í•´ ë°˜í™˜ë˜ëŠ” ê°’**ì„ ìƒì„±í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆë‹¤.
    
    ```kotlin
    public fun <T> CoroutineScope.async(
        context: CoroutineContext = EmptyCoroutineContext,
        start: CoroutineStart = CoroutineStart.DEFAULT,
        block: suspend CoroutineScope.() -> T
    ): Deferred<T>
    // Deffered<T> íƒ€ì…ì˜ ê°ì²´ ë¦¬í„´, ì—¬ê¸°ì„œ TëŠ” ìƒì„±ë˜ëŠ” ê°’ì˜ íƒ€ì…
    ```
    
    ```kotlin
    public interface Deferred<out T> : Job {
    	// ì‘ì—…ì´ ëë‚˜ë©´ ê°’ì„ ë°˜í™˜í•˜ëŠ” ì¤‘ë‹¨ ë©”ì„œë“œ  
    	public suspend fun await(): T
    }
    ```
    

```kotlin
fun main() = runBlocking {
	val resultDeferred: Deferred<Int> = GlobalScope.async {
		delay(1000L)
		42
	}
	// ë‹¤ë¥¸ ì‘ì—… ì¤‘..
	val result: Int = resultDeferred.await() // (1ì´ˆ í›„)
	println(result) // 42
	// ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ì‘ì„± ê°€ëŠ¥
	println(resultDeferred.await()) //42
}
```

async ë¹Œë”ëŠ” í˜¸ì¶œë˜ì§€ë§ˆì **ì½”ë£¨í‹´ì„ ì¦‰ì‹œ ì‹œì‘**í•œë‹¤. ë”°ë¼ì„œ **ëª‡ ê°œì˜ ì‘ì—…ì„ í•œ ë²ˆì— ì‹œì‘í•˜ê³  ëª¨ë“  ê²°ê³¼ë¥¼ í•œêº¼ë²ˆì— ê¸°ë‹¤ë¦´ ë•Œ ì‚¬ìš©**í•œë‹¤.

ë°˜í™˜ëœ DeferredëŠ” ê°’ì´ ìƒì„±ë˜ë©´ í•´ë‹¹ ê°’ì„ ë‚´ë¶€ì— ì €ì¥í•˜ê¸° ë•Œë¬¸ì— awaitì—ì„œ ê°’ì´ ë°˜í™˜ë˜ëŠ” ì¦‰ì‹œ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê°’ì´ ìƒì„±ë˜ê¸° ì „ì— await í˜¸ì¶œí•˜ë©´ ê°’ì´ ë‚˜ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê²Œ ëœë‹¤.

```kotlin
fun main() = runBlocking {
	val res1 = GlobalScope.async {
		delay(1000L)
		"Text 1"
	}
	val res2 = GlobalScope.async {
		delay(3000L)
		"Text 2"
	} 
	val res3 = GlobalScope.async {
		delay(2000L)
		"Text 3"
	}
	println(res1.await())
	println(res2.await())
	println(res3.await())
}
// (1ì´ˆ í›„)
// Text 1
// (2ì´ˆ í›„)
// Text 2
// Text 3
```

<aside>
âš ï¸ asyncëŠ” ê°’ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©, launchëŠ”  ê°’ì´ í•„ìš”í•˜ì§€ ì•Šì„ ë•Œ ì‚¬ìš©

</aside>

async ë¹Œë”ëŠ” ë‘ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©

ex) ë‘ ê°€ì§€ ë‹¤ë¥¸ ê³³ì—ì„œ ë°ì´í„°ë¥¼ ì–»ì–´ì™€ í•©ì¹˜ëŠ” ê²½ìš°

```kotlin
scope.launch {
	val news = async {
		newsRepo.getNews()
			.sortedByDescending { it.date }
	}
	val newsSummary = newsRepo.getNewsSummary()
	// asyncë¡œ ë˜í•‘í•  ìˆ˜ ìˆì§€ë§Œ, ë¶ˆí•„ìš”í•œ ì‘ì—…
	view.showNews(
		newsSummary,
		news.await()
	)
}
```

## êµ¬ì¡°í™”ëœ ë™ì‹œì„±

ì½”ë£¨í‹´ì€ ì–´ë–¤ ìŠ¤ë ˆë“œë¡œ ë¸”ë¡í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í”„ë¡œê·¸ë¨ì´ ëë‚˜ëŠ” ê±¸ ë§‰ì„ ë°©ë²•ì´ ì—†ë‹¤.

```kotlin
fun main() = runBlocking {
	GlobalScope.launch {
		delay(1000L)
		println("World!")
	}
	GlobalScope.launch {
		delay(2000L)
		println("World!")
	}
	println("Hello,")
	delay(3000L)
}
// World!ë¥¼ ì¶œë ¥í•˜ë ¤ë©´ delayê°€ ìˆì–´ì•¼ í•¨
```

GlobalScopeê°€ í•„ìš”í•œ ì´ìœ ëŠ”?

- launchì™€ asyncê°€ CoroutineScopeì˜ í™•ì¥ í•¨ìˆ˜ì´ê¸° ë•Œë¬¸

```kotlin
fun <T> runBlocking(
	context: CoroutineContext = EmptyCoroutineContext, 
	block: suspend CoroutineScope.() -> T
): T
```

```kotlin
fun CoroutineScope.launch(
    context: CoroutineContext = EmptyCoroutineContext,
    start: CoroutineStart = CoroutineStart.DEFAULT,
    block: suspend CoroutineScope.() -> Unit
): Job
```

```kotlin
fun <T> CoroutineScope.async(
    context: CoroutineContext = EmptyCoroutineContext,
    start: CoroutineStart = CoroutineStart.DEFAULT,
    block: suspend CoroutineScope.() -> T
): Deferred<T>
```

runBlockingê³¼ ë‘ ë¹Œë” í•¨ìˆ˜ë¥¼ ì‚´í´ë³´ë©´ **block íŒŒë¼ë¯¸í„°ê°€ ë¦¬ì‹œë²„ íƒ€ì…ì´ CoroutineScopeì¸ í•¨ìˆ˜í˜• íƒ€ì…**

â†’ GlobalScopeë¥¼ êµ³ì´ ì‚¬ìš©í•˜ì§€ ì•Šê³  runBlockingì´ ì œê³µí•˜ëŠ” ë¦¬ì‹œë²„ë¥¼ í†µí•´ this.launch or launchì™€ ê°™ì´ launchë¥¼ í˜¸ì¶œí•´ë„ ëœë‹¤.

â†’ ì´ë ‡ê²Œ í•˜ë©´ launchëŠ” runBlokingì˜ ìì‹ì´ ëœë‹¤.

â†’ runBlockingì€ ëª¨ë“  ìì‹ì´ ì‘ì—…ì„ ëë§ˆì¹  ë•Œê¹Œì§€ ì¤‘ë‹¨ ëœë‹¤.(ë¶€ëª¨ê°€ ìì‹ë“¤ ëª¨ë‘ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê±´ ë‹¹ì—°)

```kotlin
fun main() = runBlocking {
	this.launch {
		delay(1000L)
		println("World!")
	}
	launch {
		delay(2000L)
		println("World!")
	}
	println("Hello,")
}
// Hello,
// (1ì´ˆ í›„)
// World!
// (1ì´ˆ í›„)
// World!
```

**ë¶€ëª¨ëŠ” ìì‹ë“¤ì„ ìœ„í•œ ìŠ¤ì½”í”„ ì œê³µ, ìì‹ë“¤ì€ í•´ë‹¹ ìŠ¤ì½”í”„ ë‚´ì—ì„œ í˜¸ì¶œ â†’ êµ¬ì¡°í™”ëœ ë™ì‹œì„± ê´€ê³„ ì„±ë¦½**

- ìì‹ì€ ë¶€ëª¨ë¡œë¶€í„° ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì†ë°›ëŠ”ë‹¤.
- ë¶€ëª¨ëŠ” ëª¨ë“  ìì‹ì´ ì‘ì—…ì„ ë§ˆì¹  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.
- ë¶€ëª¨ ì½”ë£¨í‹´ì´ ì·¨ì†Œë˜ë©´ ìì‹ ì½”ë£¨í‹´ë„ ì·¨ì†Œëœë‹¤.
- ìì‹ ì½”ë£¨í‹´ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´, ë¶€ëª¨ ì½”ë£¨í‹´ ë˜í•œ ì—ëŸ¬ë¡œ ì†Œë©¸í•œë‹¤.

runBlockingì€ CoroutineScopeì˜ í™•ì¥ í•¨ìˆ˜ê°€ ì•„ë‹ˆë‹¤

â†’ runBlokingì€ ìì‹ì´ ë  ìˆ˜ ì—†ìœ¼ë©° ë£¨íŠ¸ ì½”ë£¨í‹´ìœ¼ë¡œë§Œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤. (ê³„ì¸µìƒ ëª¨ë“  ìì‹ì˜ ë¶€ëª¨ê°€ ëœë‹¤)

â†’ ë‹¤ë¥¸ ì½”ë£¨í‹´ê³¼ ì“°ì„ìƒˆê°€ ë‹¤ë¥´ë‹¤.

## í˜„ì—…ì—ì„œì˜ ì½”ë£¨í‹´ ì‚¬ìš©

<aside>
ğŸ“Œ ì¤‘ë‹¨ í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ ì¤‘ë‹¨ í•¨ìˆ˜ë“¤ë¡œë¶€í„° í˜¸ì¶œë˜ì–´ì•¼ í•˜ë©°, ëª¨ë“  ì¤‘ë‹¨ í•¨ìˆ˜ëŠ” ì½”ë£¨í‹´ ë¹Œë”ë¡œ ì‹œì‘ë˜ì–´ì•¼ í•œë‹¤

</aside>

<aside>
ğŸ“Œ runBlockingì„ ì œì™¸í•œ ëª¨ë“  ì½”ë£¨í‹´ ë¹Œë”ëŠ” CoroutineScopeì—ì„œ ì‹œì‘ë˜ì–´ì•¼ í•œë‹¤

</aside>

ì¢€ë” í° ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ìŠ¤ì½”í”„ë¥¼ ì§ì ‘ ë§Œë“¤ê±°ë‚˜ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ìŠ¤ì½”í”„ë¥¼ ì‚¬ìš©í•œë‹¤. ì²« ë²ˆì§¸ ë¹Œë”ê°€ ìŠ¤ì½”í”„ì—ì„œ ì‹œì‘ë˜ë©´ ë‹¤ë¥¸ ë¹Œë”ê°€ ì²« ë²ˆì§¸ ë¹Œë”ì˜ ìŠ¤ì½”í”„ì—ì„œ ì‹œì‘ë  ìˆ˜ ìˆë‹¤.

**ì‹¤ì œ í”„ë¡œì íŠ¸ ì˜ˆì‹œ**

```kotlin
// ì•ˆë“œë¡œì´ë“œ ì˜ˆì‹œ
class NetworkUserRepository (
	private val api: UserApi,
) : UserRepository {
	suspend fun getUser(): User = api.getUser().toDomainUser()
}

class NetworkNewsRepository (
	private val api: NewsApi,
	private val settings: SettingsRepository, 
) : NewsRepository {
	
	suspend fun getNews(): List<News> = api.getNews()
		.map { it.toDomainNews() }
	
	suspend fun getNewsSummary(): List<News> {
		val type = settings.getNewsSummaryType()
		return api.getNewsSummary(type)
	}
}

class MainPresenter(
	private val view: MainView,
	private val userRepo: UserRepository,
	private val newsRepo: NewsRepository,
) : BasePresenter {
	
	fun onCreate() {
		scope.launch {
			val user = userRepo.getUser()
			view.showUserData(user)
		}
		scope.launch {
			val news = async {
				newsRepo.getNews()
					.sortedByDescending { it.date }
			}
			val newsSummary = async {
				newsRepo.getNewsSummary()
			}
			view,showNews(newsSummary.await(), news.await())
		}
	}
}	
```

**ì¤‘ë‹¨ í•¨ìˆ˜ì—ì„œ ìŠ¤ì½”í”„ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í• ê¹Œ?**

ì½”ë£¨í‹´ ë¹Œë”ê°€ ì‚¬ìš©í•  ìŠ¤ì½”í”„ë¥¼ ë§Œë“¤ì–´ ì£¼ëŠ” ì¤‘ë‹¨ í•¨ìˆ˜ì¸ coroutineScope í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

## coroutineScope ì‚¬ìš©í•˜ê¸°

```kotlin
/*
	ë¦¬í¬ì§€í† ë¦¬ í•¨ìˆ˜ì—ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë‘ ê°œì˜ ìì›ì„ ê°€ì§€ê³  ì˜¤ëŠ” ìƒí™© 
*/
suspend fun getArticlesForUser(
	userToken: String?,
): List<ArticleJson> = coroutineScope {
	val articles = async { articleRepository.getArticles() }
	val user = userService.getUser(userToken)
	articles.await()
		.filter { canSeeOnList(user, it) }
		.map { toArticleJson(it) }
}	
//ìœ„ í•¨ìˆ˜ ë‚´ì—ì„œ asyncë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ ìŠ¤ì½”í”„ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— coroutineScope í•¨ìˆ˜ ì‚¬ìš©í•œë‹¤.
```

**coroutineScope**

- ëŒë‹¤ í‘œí˜„ì‹ì´ í•„ìš”ë¡œ í•˜ëŠ” ìŠ¤ì½”í”„ë¥¼ ë§Œë“¤ì–´ ì£¼ëŠ” ì¤‘ë‹¨ í•¨ìˆ˜
- let, run, use ë˜ëŠ” runBlockingì²˜ëŸ¼ ëŒë‹¤ì‹ì´ ë°˜í™˜í•˜ëŠ” ê²ƒì´ë©´ ë¬´ì—‡ì´ë“  ë°˜í™˜í•œë‹¤.
- ì¤‘ë‹¨ í•¨ìˆ˜ ë‚´ì—ì„œ ìŠ¤ì½”í”„ê°€ í•„ìš”í•  ë•Œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
- ì¤‘ë‹¨ í•¨ìˆ˜ë¥¼ coroutineScopeì™€ í•¨ê»˜ ì‹œì‘í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
    
    ```kotlin
    suspend fun main(): Unit = coroutineScope {
    	launch {
    		delay(1000L)
    		println("World!")
    	}
    	println("Hello,")
    }
    ```
    

![                                     [ê·¸ë¦¼] kotlinx.coroutines ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‹¤ì–‘í•œ ìš”ì†Œë“¤ì˜ ì‚¬ìš© ìš©ë„](https://github.com/woowacourse-study/2023-BookOverFlow/assets/50761690/e3368648-c5cc-4069-b7fa-e4859645c0c3)

                                     [ê·¸ë¦¼] kotlinx.coroutines ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‹¤ì–‘í•œ ìš”ì†Œë“¤ì˜ ì‚¬ìš© ìš©ë„

- ì½”ë£¨í‹´ì€ ìŠ¤ì½”í”„ ë˜ëŠ” runBlockingì—ì„œ ì‹œì‘ëœë‹¤. ì´í›„ì— ë‹¤ë¥¸ ì½”ë£¨í‹´ ë¹Œë”ë‚˜ ì¤‘ë‹¨ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
- ì¤‘ë‹¨ í•¨ìˆ˜ì—ì„œ ë¹Œë”ë¥¼ ì‹¤í–‰í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ coroutineScopeì™€ ê°™ì€ ì½”ë£¨í‹´ ìŠ¤ì½”í”„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.
