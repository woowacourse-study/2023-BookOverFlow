# 2.1 네트워크 계층

## 2.1.1 OSI 7계층

국제 표준화 기구에서 **네트워크 통신이 이뤄지는 과정을 7단계로 나눈 네트워크 표준 모델**

![IMG_4032.jpeg](https://prod-files-secure.s3.us-west-2.amazonaws.com/203d6d84-3936-4265-836e-c5aa6af877e9/2ed33abf-357c-4f68-aab3-bfd49306833d/IMG_4032.jpeg)

데이터를 송신할 때는 높은 계층에서 낮은 계층으로 전달, 데이터가 수신부의 가장 낮은 계층에 도달하면 수신부에서는 낮은 계층에서 높은 계층으로 데이터 전달

각 계층은 독립적, 데이터 송신할 때 각 계층에서 필요한 전보를 추가해 데이터 가공

- 제어 정보를 담은 헤더나 트레일러가 붙음 → **데이터 캡슐화**
- 수신부와 같은 계층에서 데이터 호환성을 높이고 오류의 영향 최소화 하기 위함

![데이터캡슐화.png](https://github.com/team-replace/replace-android/assets/50761690/f76783e6-2b61-45f3-b0bd-220e0bb6d3a1)

송신부에서 데이터 캡술화를 거친 결과물 수신부 전달 → 수신부는 물리계층부터 응용 계층까지 거치며 받은 데이터에서 헤더와 트레이러를 분석해 제거하는 **역캡슐화** 진행

- 각 계층은 필요한 제어 정보를 얻음

### OSI 7계층 전체 구조

**프로토콜 →** 통신 규약**, 데이터를 송수신하기 위해 정한 규칙**

![데이터 송수신 흐름.png](https://github.com/team-replace/replace-android/assets/50761690/81f083a8-cd5f-47ea-946d-c9ce7eb79849)

- 7계층(응용 계층) - HTTP, FTP 등의 프로토콜을 응용 프로그램의 UI를 통해 제공
- 6계층(표현 계층) - 데이터를 표준화된 형식으로 변경
- 5계층(세션 계층) - 세션의 유지 및 해체 등 응용 프로그램 간 통신 제어와 동기화
- 4계층(전송 계층) - 신뢰성 있는 데이터 전달하기 위한 계층, TCP, UDP 같은 전송 방식과 포트번호 결정
- 3계층(네트워크 계층) - **라우팅**(데이터를 송신부에서 수신부까지 보내기 위한 최적 경로 선택) 수행, 선택한 최적의 경로를 **라우트,** 네트워크 계층의 장비로는 **라우터**가 있음
- 2계층(데이터 링크 계층) - 데이터 흐름을 관리하며 데이터 오류 검출 및 복구 수행, bridge, switch, ethernet 등이 데이터 링크 계층 장비
- 1계층(물리 계층) - 데이터를 비트 단위의 0과 1로 변환한 후 장비를 사용해 전송하거나 전기 신호를 데이터로 복원, repeater, hub 등이 물리 계층 장비

## 2.1.2 TCP/IP 4계층

**TCP/IP**

- **인터넷에서 데이터를 주고받기 위한 네트워크 프로토콜**
- TCP(Transmission Control Protocol) → 데이터를 나눈 단위인 패킷의 전달 여부와 전송 순서를 보장하는 통신 방식
- IP(Internet Protocol) → 패킷을 빠르게 보내기 위한 통신 방식
- TCP/IP 기반 프로토콜 → HTTP

TCP/IP 4계층 —> **OSI 7계층을 TCP/IP에 맞춰 단순화한 것**

![IMG_4033.JPG](https://github.com/team-replace/replace-android/assets/50761690/2e2c9b78-4c49-4685-8708-dd3d184813f9)

### TCP/IP 각 계층의 데이터 흐름과 전송 단위

![IMG_4034.JPG](https://github.com/team-replace/replace-android/assets/50761690/d3b4be4a-027c-4059-992b-b6fbf1525843)

- 4계층(응용 계층) - 사용자와 소프트웨어를 연결해주는 계층, HTTP, HTTPS, DNS 등의 프로토콜 작동
- 3계층(전송 계층) - 데이터의 신뢰성 보장, 포트 번호로 데이터를 적절한 응용 프로그램에 전달하는 역할, TCP, UDP 등의 프로토콜이 전송계층에 속함, **세그먼트**(전송 계층의 데이터 단위)
- 2계층(인터넷 계층) - 데이터를 최종 목적지까지 도달할 수 있게 하는 계층, IP가 대표적인 프로토콜, 전송계층에서 받은 데이터에 헤더를 붙여 캡슐화( **패킷** or **데이터 그램**)
- 1계층(네트워크 인터페이스 계층) - 네트워크 접근 계층, 데이터를 전기 신호로 변환, MAC 주소(48비트로 구성된 하드웨어 고유의 주소)를 사용해 기기에 데이터 전달, 이더넷, Wi-Fi 등이 해당 계층에 속하는 대표적인 프로토콜

**IP 주소**

- IP에서 컴퓨터 또는 네트워크 장치를 식별하기 위한 값, IPv4에서 주소는 8자리 2진수 4개를 10진수로 표현
- 네트워크 부와 호스트 부로 나뉨
    - 네트워크부 → 해당 주소가 어떠한 네트워크에 속해 있는지 구분하는 값
    - 호스트부 → 해당 네트워크에서 어떠한 기기인지를 나타내는 값

![IPv4.png](https://github.com/team-replace/replace-android/assets/50761690/348f2279-be4e-4ba6-af3c-39b33902cdef)

**서브넷 마스크(subnet mask)**

- 네트워크부와 호스트부를 구분하기 위해 사용
- IP와 동일한 구조인 8자리 2진수 4개로 구성
- IP 주소와 and 연산을 하면 IP 주소에서 네트워크부와 호스트부 알아낼 수 있음
