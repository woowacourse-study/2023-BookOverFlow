# 2.1 네트워크 계층

## OSI 7계층

(Open Systems Interconnection Reference Model 7 Layers)

- 국제 표준화 기구에서 **네트워크 통신이 이뤄지는 과정을 7단계로 나눈 네트워크 표준 모델**
- 데이터 → 송신부 → 높은 계층 → 낮은 계층 → 높은 계층 → 수신부

### **데이터 캡슐화**

- 각 계층은 데이터를 송신할 때 독립적이며 각 계층에서 필요한 정보를 추가해 데이터를 가공함
    - 제어 정보를 담은 헤더 또는 트레일러를 추가
- 수신부에서 헤더와 트레일러를 분석해 제거하는 **역캡슐화**를 진행
- 데이터 캡슐화의 이유
    - 수신부의 같은 계층에서 데이터 호환성을 높임
    - 오류의 영향 최소화 → 특정한 곳에 이상이 생기면 그 단계만 수정

### OSI 7계층의 전체 구조와 역할

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/d4809f18-a915-4e30-8b11-8f015eacff00/486e3293-27f4-4a57-b003-4835042bdd32/Untitled.png)

**7계층 (응용 계층)**

- HTTP, FTP 등의 프로토콜을 응용 프로그램의 UI를 통해 제공

**6계층 (표현 계층)**

- 데이터를 표준화된 형식으로 변경
    - 파일 인코딩, 명령어 포장, 압축, 암호화

**5계층 (세션 계층)**

- 세션의 유지 및 해제 등 응용 프로그램 간 통신 제어와 동기화

**4계층 (전송 계층)**

- 신뢰성 있는 데이터를 전송하기 위한 계층
- TCP/UDP 같은 전송 방식, 포트 번호 등을 결정

**3계층 (네트워크 계층)**

- `라우트`(송신부→수신부까지 보내기 위한 최적 경로)를 선택하는 `라우팅`을 수행
    - 라우팅, 흐름제어, 오류제어, 세그먼테이션
- 장비: 라우터

**2계층 (데이터 링크 계층)**

- 데이터 흐름을 관리하며 데이터의 오류 검출 및 복구 등을 수행
    - 에러검출, 재전송, 흐름제어
- 장비: bridge, switch, ethernet

**1계층 (물리 계층)**

- 데이터를 비트 단위의 0, 1로 변환한 후 장비를 사용해 전송하거나 전기 신호를 데이터로 복원
- 장비: repeater, hub

**프로토콜** (protocol)

- 통신 규약
- 데이터를 송수신하기 위해 정한 규칙

## TCP/IP 4계층

**TCP/IP** 

- 인터넷에서 데이터를 주고받기 위한 네트워크 프로토콜
- e.g. HTTP

**TCP (Transmission Control Protocol)**

- 패킷의 전달 여부와 전송 순서를 보장하는 통신 방식

**IP (Internet Protocol)**

- 패킷을 빠르게 보내기 위한 통신 방식

**패킷**

- 데이터를 작게 분할한 단위
- 데이터의 송신/수신 주소 등의 정보를 포함

### TCP/IP 4계층

- TCP/IP에 맞춰 OSI 7계층을 단순화

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/d4809f18-a915-4e30-8b11-8f015eacff00/c7d055ce-b6c6-4df6-bceb-13ff5329d5c9/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/d4809f18-a915-4e30-8b11-8f015eacff00/8f410422-a01c-47e2-872d-709b6add256e/Untitled.png)

**4계층 (응용 계층)**

- 사용자 — 소프트웨어를 연결해주는 계층
- HTTP, HTTPS, DNS 등의 프로토콜이 작동

**3계층 (전송 계층)**

- 데이터의 신뢰성을 보장
- 포트 번호로 데이터를 적절한 응용 프로그램에 전달하는 역할
- 대표적인 프로토콜: **TCP / UDP**
- 전송 계층의 데이터 단위는 `세그먼트`

**2계층 (인터넷 계층)**

- 데이터를 최종 목적지까지 도달할 수 있게 하는 계층
- 대표적인 프로토콜: **IP**
- `패킷` 또는 `데이터그램` : 전송 계층으로부터 받은 데이터에 헤더를 붙여 캡슐화

**1계층 (네트워크 인터페이스 계층)**

- 네트워크 접근 계층
- 데이터를 전기 신호로 변환하고 MAC 주소를 사용해 기기에 데이터를 전달
    - MAC 주소: 48비트로 구성된 하드웨어 고유의 주소
- 대표적인 프로토콜: **이더넷, Wi-Fi**

### IP 주소

- IP에서 컴퓨터 또는 네트워크 장치를 식별하기 위한 값
- IPv4
    - xxx.xxx.xxx.xxx
    - 8자리 2진수 4개 (32bits) 를 10진수로 표현한 형태
    - 네트워크부: 해당 주소가 어떠한 네트워크에 속해 있는지 구분하는 값
    - 호스트부: 해당 네트워크에서 어떠한 기기인지를 나타내는 값
- IPv6
    - x:x:x:x:x:x:x:x
    - x는 16진값, 총 128 bits

### 서브넷 마스크 (subnet mask)

**서브넷팅**

- 네트워크를 더욱 작은 단위의 네트워크로 분할하는 것
- 서브넷 마스크의 bit수를 증가시켜 할당할 수 있는 네트워크는 2배로 증가, 
호스트 수는 2배로 감소

**서브넷 마스크**

- 네트워크와 호스트부를 구분하기 위해 사용
- IP와 동일한 구조인 8자리 2진수 4개로 구성됨
- 11111111.11111111.11111111.00000000 처럼 연속적인 1과 0으로 구성
    - IP주소와 and 연산을 함으로써 네트워크부와 호스트부를 식별함