# 2.3 HTTP

## HTTP (HyperText Transfer Protocol)

- 인터넷상에서 데이터를 전송하기 위한 프로토콜
- TCP/IP 4계층 중 `응용 계층`에 속함

### 특징

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/d4809f18-a915-4e30-8b11-8f015eacff00/6493e355-daa0-4604-9746-56dad814debe/Untitled.png)

**비연결성 (connectionless)**

- 클라이언트에서 요청을 보낸 후 서버로부터 응답을 받으면 연결을 끊는 것
- 불특정 다수를 대상으로 하는 서비스에 유리
- **장점**: 연결을 유지하지 않음으로써 자원을 절약
- **단점**: 서버가 클라이언트를 기억할 수 없음, 동일 클라이언트에서 연속적으로 요청이 오는 경우 연결-연결 해제 반복으로 자원 낭비
- HTTP Keep Alive
    - HTTP 헤더의 일종, 서버에서 연결을 유지할 시간을 헤더에 추가해 응답
    - 마지막 응답 이후 일정 시간 동안 연결 유지
    - 동일 클라이언트로부터 요청이 오면 연결 과정생략 가능

**무상태 (stateless)**

서버에서 클라이언트의 상태(요청 사항)를 저장하지 않는 것

- `쿠키`
    - 클라이언트가 요청에 필요한 데이터를 모두 갖고 있는 것
    - 로컬 웹 브라우저에 저장하는 데이터 파일, 키—값
    - e.g. 웹 사이트 로그인 정보, 쇼핑몰 장바구니
- `세션`
    - 서버가 클라이언트로부터 받은 요청 사항을 모두 저장한 것
    - 연결 정보를 저장 및 관리
    - 보안상 좋음, 접속자가 많으면 서버 과부하 가능
- **장점**: 서버 확장성이 높음 ← 클라이언트에 응답하는 서버가 바뀌어도 되기 때문에

**HTTP 메시지**

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/d4809f18-a915-4e30-8b11-8f015eacff00/0b6d35f6-228f-464e-94f9-2983d57428e9/Untitled.png)

**요청 라인 (request line):** 요청 URI, 요청 방법, HTTP 버전 등을 포함

**상태 라인 (status line)**: 요청에 대한 HTTP 상태 코드와 HTTP 버전 포함

**헤더 (header)**: 키—값으로 구성된 다수의 헤더 항목으로 구성

**빈 줄 (blank line)**: 헤더의 끝을 나타내는 빈 줄. 헤더와 바디를 구분

**바디 (body)**: POST 메서드인 경우에만 바디가 존재하며, 그 외의 메서드일 때는 비어 있는 상태로 전달

**상태 코드**

클라이언트 요청에 대한 서버의 상태를 알려 주는 코드

세자리 숫자로 표현

- 1xx: 클라이언트로 요청을 받아 처리 중
- 2xx: 요청을 성공적으로 처리함
- 3xx: 요청을 처리하기 위해 추가 처리 필요
- 4xx: 클라이언트 오류
- 5xx: 서버 오류

## HTTPS (HyperText Transfer Protocol Secure)

- 보안 계층인 SSL/TLS를 이용해 HTTP의 보안을 강화한 웹 통신 프로토콜
    - HTTP는 데이터 암호화가 없거등요
- SSL (Secure Socket Layer)
    - 넷스케이프에서 개발한 암호화 프로토콜
- TLS (Transfer Layer Security)
    - SSL의 몇 가지 문제점을 보완해 개발

⇒ 통용되는 방식은 TLS이나 명칭은 SSL/TLS 라고 부름

### 동작 방식

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/d4809f18-a915-4e30-8b11-8f015eacff00/36e4e3d9-d5b6-4b23-900b-dc22b80e7966/Untitled.png)

- 데이터를 송신할 때, 
응용 계층 → 보안 계층의 SSL/TLS에서 데이터 암호화 → 전송 계층
- 데이터를 수신할 때, 
전송 계층 → 보안 계층의 SSL/TLS에서 복호화 → 응용 계층

**암호화 방식**

- 대칭 키 암호화 방식
    - 암호화/복호화에 모두 같은 키인 대칭 키 이용
    - 수신자 → 송신자에게 키를 줌 (송신자가 다르면 키도 다름)
        
        송신자는 받은 키로 데이터를 암호화해 수신자에 전송
        
        수신자는 동일한 키로 데이터를 복호화
        
    - 대칭 키 유출에 주의 !
- 공개 키 암호화 방식
    - 암호화/복호화에 다른 키 이용
    - 암호화 → 공개 키, 복호화 → 비밀 키
    - 수신자 → 송신자에게 공개 키를 줌 (송신자가 달라도 공개 키는 같음)
        
        송신자는 받은 키로 데이터를 암호화
        
        수신자는 비밀 키로 데이터를 복호화
        
    - 공개 키 유출 염려할 필요 없음
- 추가학습
    - RSA
    - 왜 공개 키 방식만 쓰는게 아니라 대칭 키 방식도 사용하죠?

## 웹 페이지 접속 과정

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/d4809f18-a915-4e30-8b11-8f015eacff00/92648aca-061b-4283-92a7-b2304e8c9079/Untitled.png)

1. 사용자가 웹 브라우저에 URL 입력
2. 웹 브라우저는 입력한 URL을 바탕으로 DNS (Domain Name System) 서버에 
연결할 IP를 요청
3. DNS 서버는 웹 브라우저에게 IP 주소를 응답으로 제공
4. 웹 브라우저는 IP를 통해 웹 서버와 TCP/IP 연결하고 HTTP 요청 전송
5. 웹 서버는 HTTP 요청에 응답. (응답은 웹 페이지와 필요한 리소스 포함)
6. 웹 브라우저는 받은 응답을 바탕으로 사용자에게 웹 페이지를 보여줌