# 2장(간단한 프로토콜 HTTP)

## 2.1 HTTP는 클라이언트와 서버 간에 통신을 한다

- 텍스트 및 이미지와 같은 리소스를 필요하다고 요구하는 쪽이 클라이언트, 제공하는쪽이 서버가 된다.

## 2.2 리퀘스트와 리스폰스를 교환하여 성립

- HTTP는 클라이언트로부터 리퀘스트가 송신되며, 그 결과가 서버로부터 리스폰스로 되돌아온다.

![image](https://github.com/woowacourse-study/2023-cs-study/assets/81347125/9857132f-7658-4fe2-b050-8976eb78e65a)


- 리퀘스트 메시지는 메서드, URI, 프로토콜 버전, 옵션 리퀘스트 헤더 필드와 엔티티로 구성되어 있다.
- 리스폰스 메시지는 프로토콜 버전, 상태 코드, 상태 코드 설명 프레이즈, 옵션의 리스폰스 헤더 필드와 바디로 구성되어 있다.

## 2.3 HTTP는 상태를 유지하지 않는 프로토콜

- HTTP는 상태를 계속 유지하지 않는 stateless 프로토콜이다.
    - 이전에 보냈던 걸 기억하지 않는다.
- 새로운 리퀘스트마다 새로운 리스폰스가 형성된다.
    - 많은 데이터를 매우 빠르고 확실하게 처리하는 범위성을 확보하기 위함이다.

쿠키

- stateless함의 단점을 보완하기 위해 도입되었다.

## 2.4 리퀘스트 URI로 리소스를 식별

- HTTP는 URI를 사용하여 인터넷 상의 리소스를 지정한다.
- 인터넷 상의 어떤 장소에 있는 리소스도 호출할 수 있다.
- 클라이언트의 리퀘스트엔 URI가 다양한 방법으로 포함되어있다.
    - 리퀘스트 URI, Host 헤더 필드에 네트워크 로케이션 등

## 2.5 서버에 임무를 부여하는 HTTP 메서드

GET

- 리소스 획득

POST

- 엔티티 전송

PUT

- 파일 전송

HEAD

- 메시지 헤더 취득
- GET과 같은 기능이지만, 메시지 바디는 돌려주지 않는다.
- URI 유효성과 리소스 갱신 시간을 확인하는 목적 등으로 사용한다.

DELETE

- 파일 삭제

OPTIONS

- 제공하고 있는 메서드의 문의
- 리퀘스트 URI로 지정한 리소스가 제공하고 있는 메서드를 조사하는 목적으로 사용한다.

TRACE

- 경로 조사
- Web 서버에 접속해서 자신에게 통신을 되돌려 받는 루프백을 발생한다.
- 리퀘스트를 보낼 때 ‘Max-Forwards’ 라는 헤더 필드에 수치를 포함시켜 서버를 통과할 때마다 그 수치를 줄여나간다.
    - 수치가 0이 된 곳을 끝으로, 리퀘스트를 마지막으로 수신한 곳에서 상태 코드 200 OK 리스폰스를 되돌려준다.
- 프록시 등을 중계하여 오리진 서버에 접속할 때 그 동작을 확인하는 목적으로 사용한다.

CONNECT

- 프록시에 터널링 요구
- 프록시에 터널 접속 확립을 요구함으로써, TCP 통신을 터널링 시키기 위한 목적으로 사용한다.
    - 주로 SSL이랑 TLS 등의 프로토콜로 암호화된 것을 터널링 시키기 위해서 사용한다.
    - 프록시는 우회 프로그램? 서버인것같다.

## 2.6 메서드를 사용해서 지시를 내리다

위랑 같다

## 2.7 지속 연결로 접속량을 절약

- HTTP 통신 초기버전에서는 통신을 할 때 마다 TCP에 의해 연결과 종료를 반복하여 통신량 낭비가 있었다.

### 2.7.1 지속 연결

- 이후 버전에선 이를 해결하기 위해, 지속 연결이라는 방법을 고안했다.
- 어느 한쪽이 명시적으로 연결을 종료하지 않는 이상 TCP 연결을 계속 유지한다.
    - 이를 통해 오버헤드를 줄이며, 통신 속도가 증가한다.

### 2.7.2 파이프라인화

- 동기적 처리가 아닌, 파이프라인화를 통해 리스폰스를 기다리지 않고 바로 다음 리퀘스트를 보낼 수 있다.
    - 병행해서 보내는 것이 가능하여 병목현상이 줄어든다.
- 이거 완전 콜백 → 플로우로 넘어가는 안드로이드 현상이다.

## 2.8 쿠키를 사용한 상태 관리

- stateless 프로토콜의 이점은 상태를 유지하지 않기 때문에 서버의 CPU나 메모리 같은 리소스의 소비를 억제할 수 있다.

쿠키

- 쿠키는 서버에서 리스폰스로 보내진 Set-Cookie라는 헤더 필드에 이해 쿠키를 클라이언트에 보존하게 된다.
- 다음번에 클라이언트가 같은 서버로 리퀘스트를 보낼 때, 자동으로 쿠키 값을 넣어서 송신한다.
