# 1장. 웹과 네트워크의 기본에 대해 알아보자

## 웹은  HTTP로 나타낸다.

클라이언트에서 서버까지 일련의 흐름을 결정하고 있는 것은 웹에서 **HTTP**(HyperText Transfer Protocaol)이라 불리는 **프로토콜**

</br>

## HTTP는 이렇게 태어나고 성장했다.

최초로 고안한 것은 여러 문서를 상호간에 관련 짓는 하이퍼텍스트에 의해 상호간에 참조할 수 있는 WWW의 개본 개념이 되는 것이었다.

1997년 1월에 공개된 HTTP/1.1이 현재 가장 많이 사용되는 버전이다. HTTP는 등장한 당시에 주로 텍스트를 전송하기 위한 프로토콜이었지만, 프로토콜 자체가 상당히 심플해서 여러 가지 응용 방법을 고려해 기능이 계속해서 추가되었다. 지금은 웹이라는 틀을 넘어서 다양하게 사용되는 프로토콜이 되었습니다.

> 네트워킹에서 프로토콜은 데이터 서식 지정 및 처리를 위한 규칙 세트입니다. 네트워크 프로토콜은 컴퓨터의 공통 언어와 같습니다. 즉, 컴퓨터 또는 전자기기 간의 원활한 통신을 위해 지키기로 약속한 규약
> 

</br>

## 네트워크의 기본은 TCP/IP

인터넷을 포함하여 일반적으로 사용하는 네트워크는 TCP/IP라는 프로토콜에서 움직이고 있다. HTTP는 그 중 하나이다. 

</br>

### TCP/IP(**Transmission Control Protocol/Internet Protocol**)는 프로토콜의 집합

> **인터넷 프로토콜 스위트 (Internet Protocol Suite)**
인터넷에서 컴퓨터들이 서로 정보를 주고 받는데 쓰이는 통신규약(프로토콜)의 모임
이 중 TCP와 IP가 가장 많이 쓰이기 때문에 TCP/IP 프로토콜 슈트라고도 불린다.
> 

인터넷과 관련된 프로토콜들을 모은 것을 TCP/IP라고 부른다. 

TCP/IP는 **패킷 통신 방식의 인터넷 프로토콜인 IP**와 **전송 조절 프로토콜인 TCP**로 이루어져 있다. IP는 패킷 전달 여부를 보증하지 않고, 패킷을 보낸 순서와 받는 순서가 다를 수 있다. TCP는 IP 위에서 동작하는 프로토콜로, 데이터의 전달을 보증하고 보낸 순서대로 받게 해준다. HTTP, FTP, SMTP 등 TCP를 기반으로 한 많은 수의 애플리케이션 프로토콜들이 이 IP 위에서 동작하기 때문에 TCP/IP라고 부르기도 한다.   

</br>

### 계층으로 관리하는 TCP/IP

최초로 고안한 것은 여러 문서를 상호간에 관련짓는 하이퍼텍스트(HyperText)에 의해 상호간에 참조할 수 있는 WWW

TCP/IP는 애플리케이션 계층 - 트랜스포트 계층 - 네트워크 계층 - 링크 계층 으로 이루어져있다. 

</br>

**애플리케이션 계층**

유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임을 결정

예) FTP, DNS, HTTP 등 여러 가지의 공통 애플리케이션이 존재

</br>

**트랜스포트 계층**

애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공

예) TCP(Transmission Control Protocol)와 UDP(User Data Protocol) 두가지 프로토콜이 존재

</br>

**네트워크 계층**

네트워크 상에서 패킷(전송하는 데이터의 최소 단위)의 이동을 다룬다. 이 계층에서는 어떠한 경로를거쳐 상대의 컴퓨터까지 패킷을 보낼지 결정하기도 한다. 

**링크 계층 (= 데이터 링크 계층, 네트워크 인터페이스 계층)**

네트워크에 접속하는 하드웨어적인 면을 다룬다. 하드웨어적 측면은 모두 링크 계층의 역할. 

예) 운영체제가 하드웨어를 제어하기 때문에 디바이스 드라이버랑 네트워크 인터페이스 카드(NIC)를 포함한다. 케이블 등과 같이 물리적으로 보이는 부분(커넥터 등을 포함한 여러 가지 전송 매체)도 포함

</br>

### TCP/IP 통신의 흐름

TCP/IP로 통신을 할 때 계층을 순서대로 거쳐 상대와 통신을 한다. 

송신하는 측은 애플리케이션 계층에서부터 내려가고, 수신하는 측은 애플리케이션 계층으로 올라간다.

</br>

**HTTP 예시**

[클라이언트] 애플리케이션 계층

어느 웹 페이지를 보고싶습니다라는 HTTP 리퀘스트

[클라이언트] 트랜스포트 계층 (TCP)

애플리케이션 계층에서 받은 데이터(HTTP 메시지)를 통신하기 쉽게 조각내어 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달

[클라이언트] 네트워크 계층 (IP)

수신지 MAC 주소를 추가해서 링크 계층에 전달 → 네트워크를 통해 송신할 준비 완료

[서버]

링크 계층에서 데이터를 받아들여 순서대로 위의 계층에 전달하여 애플리케이션 계층까지 도달.

애플리케이션 계층에서 클라이언트가 발신했던 HTTP 리퀘스트 내용 수신

각 계층을 거칠 때는 반드시 헤더로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가한다. 반대로 수신측에서는 각 계층을 거칠 때마다 반다시 해당 계층마다 사용한 헤더를 삭제한다. 이렇게 정보를 감싸는 것을 캡슐화라고 부른다.

> **MAC 주소**(media access control address, **MAC address**)
네트워크 세그먼트의 데이터 링크 계층에서 통신을 위한 네트워크 인터페이스에 할당된 고유 식별자이다.
> 

</br>

## HTTP와 관계가 깊은 프로토콜은 IP/TCP/DNS

### 배송을 담당하는 IP (Internet Protocol)

실제 이름 그대로 인터넷을 활용하는 거의 대부분의 시스템이 IP를 사용한다. 

IP역할은 개개의 **패킷을 상대방에게 전달**하는 것입니다. 상대방에게 전달하기 까지 여러 가지 요소가 필요한데, 그 중에서도 IP 주소와 MAC 주소라는 요소가 중요하다. 

> **IP주소**
컴퓨터 네트워크에서 장치들이 서로를 인식하고 통신을 하기 위해서 사용하는 특수한 번호. 
**MAC(Media Access Control Address) 주소**
네트워크 세그먼트의 데이터 링크 계층에서 통신을 위한 네트워크 인터페이스에 할당한 고유 식별자
> 

IP 주소는 각 노드에 부여된 주소를 가리키고 MAC 주소는 각 네트워크 카드에 할당된 고유의 주소이다. IP 주소는 MAC 주소와 결부된다. IP 주소는 변경 가능하지만 기본적으로 MAC 주소는 변경할 수 없다.

</br>

**통신은 ARP를 이용하여 MAC 주소에서 한다**

IP 통신 MAC 주소에 의존해서 통신한다. 인터넷에서 통신 상대가 같은 랜선 내에 있을 경우는 적어서 여러 대의 컴퓨터와 네트워크 기기를 중계해서 상대방에게 도착한다. 그렇게 중계하는 동안에는 다음으로 중계할 곳의 MAC 주소를 사용하여 목적지를 찾아는 것이다. 이때 ARP(Address Resoltion Protocol)이라는 프로토콜이 사용된다. **ARP**는 주소를 해결하기 위한 프로토콜 중 하나인데, 수신지의 **IP 주소를 바탕으로 MAC 주소를 조사**할 수 있다.

목적지까지 중계를 하는 도중에 컴퓨터와 라우터 등의 네트워크 기기는 목적지에 도착하기까지 대략적인 목적지만을 안다. 이 시스템을 **라우팅**이라고 한다

</br>

### 신뢰성을 담당하는 TCP(Transfer Control Protocol)

신뢰성있는 byte stream 서비스를 제공한다. 여기서 신뢰성은 상대방에게 전달한다는 의미입니다. 결국 TCP는 대용량의 데이터를 보내기 쉽게 작게 분해하여 상대에게 보내고, 정확하게 도착했는지 확인하는 역할을 합니다. 

> **바이트 스트림 서비스**
용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리하는 것
> 

상대에게 확실하게 데이터를 보내기 위해서 TCP는 **3-way handshaking** 이라는 방법을 사용한다.

이 방법은 패킷을 보내고 나서 바로 끝내는 것이 아니라, 보내졌는지 여부를 상대에게 확인한다.

이때 TCP Header 내의 `SYN` , `SYN/ACK` , `ACK` 플래그를 사용하여 통신을 시도한다

[송신측] 최초 `SYN` 플래그로 상대에게 접속함과 동시에 패킷을 보냄

[수신측] `SYN/ACK` 플래그로 송신측에 접속함과 동시에 패킷을 수신한 사실을 전달

[송신측] `ACK` 플래그를 보내 패킷 교환이 완료됨을 전달

이 과정 중 어디선가 통신이 도중에 끊기면 TCP는 그와 동시에 같은 수순으로 패킷을 재전송

</br>

## 이름 해결을 담당하는 DNS (Domain Name System)

DNS는 HTTP와 같이 응용 계층 시스템에서 **도메인 이름과 IP 주소 이름 확인**을 제공한다.

주로 사용자는 IP 주소 대신 이름을 이용하여 상대의 컴퓨터를 지정한다. 컴퓨터는 이름 대신 IP 주소를 선호한다. 이를 해결하기 위해 DNS는 도메인명에서 IP 주소를 조사하거나 반대로 IP 주소로부터 도메인명을 조사하는 서비스를 제공한다. 

[송신측] DNS에게 이름에 맞는 IP 주소 요청

[DNS] 해당 IP 주소 반환

[송신측] 해당 IP 주소에 송신

</br>

## URI와 URL

### URI(Uniform Resource Identifier)는 리소스 식별자

Unifrom : 통일된 서식을 결정

Resource : 식별가능한 모든 것

Identifier : 식별가능한 것을 참조하는 오브젝트 즉, 식별자

→ URI는 스키마를 나타내는 리소스를 식별하기 위한 식별자 

</br>

### URL(Uniform Resource Locator) 포맷

URI는 리소스를 식별하기 위해 문자열 전반을 나타내는데 비해 URL은 리소스의 장소(네트워크 상의 위치)를 나타낸다. URL은 URI의 서브셋이다. 

URI는 필요한 정보 전체를 지정하는 완전 수식 절대 URI(=완전 수식 절대 URL)과 브라우저 중의 기준 URI에서 상대적 위치를 지정하는 상대 URL이 있다.  

</br>

### 절대 URI 포맷

**스키마** 

리소스를 얻기 위한 수단에 이름을 붙이는 방법

**자격정보 (크리덴셜)**

서버로부터 리소스를 취득하려면 크리덴셜이 필요. 옵션으로는 유저명과 패스워드 지정 가능

**서버주소**

완전 수식 형식인 URI에서는 서버 주소를 지정할 필요가 없다. 
주소는 DNS 이름이나 IPv4주소나 IPv6주소를 대괄호로 묶어 지정한다

**서버포트**

서버의 접속 대상이 되는 네트워크 포트 번호를 지정. (옵션, 생략 시 디폴트 포트가 사용된다)

**계층적 파일 패스**

특정 리소스를 식별하기 위해서 서버 상의 파일 패스 지정

**쿼리 문자열**
파일 패스로 지정된 리소스에 임의의 파라미터를 넘겨주기 위해 쿼리 문자열 사용 (옵션)

**프래그먼트 식별자**
주로 취득한 리소스에서 서브 리소스(도큐먼트 중간에 위치)를 가리키기 위해 이용 (옵션)
