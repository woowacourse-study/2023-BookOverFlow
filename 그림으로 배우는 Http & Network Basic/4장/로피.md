# 4장 결과를 전달하는 HTTP 상태 코드

## 4.1 상태 코드는 서버로부터 리퀘스트 결과를 전달한다

**상태 코드**

- 클라이언트가 서버를 향해 리퀘스트를 보낼 때 서버에서 그 결과가 어떻게 되었는지 알려주는 것
- 예) 200 OK → 숫자의 첫 번째 자리는 리스폰스의 클래스 의미, 나머지 2자리는 분류 없음

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/203d6d84-3936-4265-836e-c5aa6af877e9/200b7b17-ec77-4596-996e-ef22ab82e59a/Untitled.png)

- 클래스의 정의만 지킨다면 RFC2616에서 정의된 상태 코드를 변경하거나 서버 독자의 상태 코드를 만들어도 상관 없음
- 실제로 자주 사용되고 있는 것은 14종류 정도

## 4.2 2xx 성공(Success)

2xx 리스폰스는 리퀘스트가 정상으로 처리되었음을 나타냄

### 4.2.1 200 OK

- 클라이언트가 보낸 리퀘스트를 서버가 정상 처리하였음을 나타냄
- 리스폰스에서 상태 코드와 함께 되돌아 오는 정보는 메소드에 따라 다름
- GET → 리퀘스트된 리소스에 대응하는 엔티티가 리스폰스로 보내짐
- HEAD → 리퀘스트된 리소스에 대응하는 엔티티 헤더 필드가 메시지 바디를 동반하지 않고 리스폰스로 돌아옴

### 4.2.2 204 No Content

- 서버가 리퀘스트를 받아서 처리하는데는 성공했지만 리스폰스에 엔티티 바디를 포함하지 않음
- 어떠한 엔티티 바디를 되돌려 보내서도 안됨
- 클라이언트에서 서버에 정보를 보내는 것으로 족하고, 클라이언트에 대해서 새로운 정보를 보낼 필요가 없는 경우 사용

### 4.2.3 206 Partial Content

- Range에 의해서 범위가 지정된 리퀘스트에 의해서 서버가 부분적 GET 리퀘스트를 받았음을 나타냄
- 리스폰스에는 Content-Range로 지정된 범위의 엔티티가 포함

## 4.3 3xx 리다이렉트(Redirection)

3xx 리스폰스는 리퀘스트가 정상적으로 처리를 종료하기 위해 부라우저 측에서 특별한 처리 수행해야함

### 4.3.1 301 Moved Permanently

- 리퀘스트된 리소스에는 새로운 URI가 부여되어 있기 때문에, 이후로는 그 리소스를 참조하는 URI를 사용해야 한다는 것을 나타냄
- 해당 URL이 영구적으로 새로운 URL로 변경되었음을 나타냄. 검색엔진 크롤러는 301 요청을 만나면 컨텐트가 완전히 새로운 URL로 영원히 이동했다고 판단함
- 예) 디렉토리를 지정했을 때 마지막 부분에 /를 붙이는 것을 잊은 경우

### 4.3.2 302 Found

- 리퀘스트된 리소스에는 새로운 URI가 할당되어 있기 때문에 그 URI를 참조해 주길 바란다는 의미를 나타냄
- 리다이렉트시 요청 메서드가 GET으로 변하고, **본문이 제거될 수 있다**.
- 요청한 리소스가 임시적으로 새로운 URL로 이동했음(Temporarily Moved)을 나타냅니다. 따라서 검색엔진은 페이지랭킹이나 링크에 대한 점수를 새로운 URL로 옮기지 않으며 기존 URL을 그대로 유지합니다. 즉 검색엔진이 기존 URL이 보유한 페이지랭킹 점수는 그대로 유지하도록 하면서 컨텐트만 새로운 URL에서 조회하도록 해야할 때 유용합니다.

### 4.3.3 303 See Other

- 리퀘스트에 대한 리소스는 다른 URI에 있기 때문에 GET 메소드를 사용해서 얻어야 한다는 것을 나타냄
- 302 Found와 같은 기능이지마, 리다이렉트 장소를 GET 메소드로 얻어야 한다고 명확하게 되어 있음

### 4.3.4 304 Not Modified

- 클라이언트가 조건부 리퀘스트를 햇을 때 리소스에 대한 액세스는 허락하지만, 조건이 충족되지 않음을 표시
- 304를 되돌려 줄 경우 리스폰스 바디에는 어떤 것도 포함되어서는 안됨
- 리다이렉트와 관계 없음

### 4.3.5 307 Temporary Redirect

- 302 Found와 같은 의미를 지님
- 리다이렉트시 **요청 메서드와 본문 유지**(요청 메서드를 변경하면 안 된다.

## 4.4 4xx 클라이언트 에러(Client Error)

4xx 리스폰스는 클라이언트 원인으로 에러가 발생했음을 나타냄

### 4.4.1 400 Bad Request

- 리퀘스트 구문이 잘못되었음을 나타냄
- 리퀘스트 내용을 재검토하고 나서 재송신할 필요 있음
- 200 OK 같이 취급함

### 4.4.2 401 Unauthorized

- 송신한 리퀘스트에 HTTP 인증 정보가 필요하다는 것을 나타냄
- 이미 1번 리퀘스트가 이루어진 경우에는 유저 인증에 실패했음을 표시
- 리스폰스를 되돌리는 경우에는 리퀘스트 된 리소스에 적용되는 challenge를 포함한 WWW-Authenticate 헤더 필드를 포함할 필요가 있음

### 4.4.3 403 Forbidden

- 리퀘스트 된 리소스의 액세스가 거부됨을 나타냄
- 서버 측은 거부의 이유를 분명히 할 필요가 있음, 이유를 명확하게 하는 경우 엔티티 바디에 기재해 유저 측에 표시
- 예) 파일 시스템의 펌션 부여되지 않은 경우, 액세스 권한에 문제가 있는 경우

### 4.4.4 404 Not Found

- 리퀘스트한 리소스가 서버상에 없다는 것을 나타냄
- 서버 측에 해당 리퀘스트를 거부하고 싶은 이유를 분명히 하고 싶지 않은 경우에도 이용

## 4.5 5xx 서버 에러(Server Error)

5xx 리스폰스는 서버 원인으로 에러가 발생하고 있음을 나타냄

### 4.5.1 500 Internal Server Error

- 서버에서 리퀘스트를 처리하는 도중에 에러가 발생하였음을 나타냄
- 웹 어플리케이션에서 에러가 발생한 경우나 일시적인 경우도 있음

### 4.5.2 503 Service Unavaliable

- 일시적으로 서버가 과부하 상태이거나 점검 중이기 때문에 현재 리퀘스트를 처리할 수 없음을 나타냄
- 이 상태 해소되기까지 시간이 걸리는 경우 Retry-After 헤더 필드에 따라 클라이언트에 전달하는 것이 바람직
