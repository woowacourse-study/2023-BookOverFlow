# 4장

## 상태 코드는 서버로부터 리퀘스트 결과를 전달한다
- 상태 코드의 역할은 리퀘스트를 보낼 때 서버에서 그 결과가 어떻게 되었는지 알려주는 것이다.
- 상태 코드는 3자리 숫자와 설명으로 나타낸다.
- 숫자의 첫 번째 자리는 리스폰스의 클래스를 의미하고 나머지 두 자리는 분류가 없다.
- 리스폰스 클래스는 5개가 정의되어 있다.
  - 1XX | Informational | 리퀘스트를 받아들여 처리중
  - 2XX | Success | 리퀘스트를 정상적으로 처리함
  - 3XX | Redirection | 리퀘스트를 완료하기 위해 추가 동작이 필요
  - 4XX | Client Error | 서버가 리퀘스트 이해 불가능
  - 5XX | Server Error | 서버가 리퀘스트 처리 실패
- 클래스의 정의만 지키면 상태 코드를 변경하거나 서버 자체의 상태 코드를 만들어도 상관없다.

<br>

## 성공
- 2XX 리스폰스는 리퀘스트가 정상으로 처리되었음을 나타낸다.
- **200 OK**
  - 리퀘스트를 서버가 정상 처리했음을 나타낸다.
  - 상태 코드와 함께 되돌아오는 정보는 메소드에 따라 다르다.
  - GET 메소드인 경우 리퀘스트된 리소스에 대응하는 엔티티가 리스폰스로 보내지고, HEAD 메소드의 경우 리퀘스트된 리소스에 대응하는 엔티티 헤더 필드가 메시지 없이 리스폰스로 반환된다.
- **204 No Content**
  - 서버가 리퀘스트를 받아서 처리하는 데는 성공했지만 리스폰스에 엔티티 바디를 포함하지 않는다.
  - 엔티티 바디를 되돌려주면 안된다.
  - 클라이언트에서 서버에 정보를 보내는 것으로 족하고, 클라이언트에 대해 새로운 정보를 보낼 필요가 없는 경우에 사용한다.
- **206 Partial Content**
  - Range에 의해 범위가 지정된 리퀘스트에 의해 서버가 부분적 GET 리퀘스트를 받았음을 나타낸다.
  - 리스폰스에는 Content-Range로 지정된 범위의 엔티티가 포함된다.

<br>

## 리다이렉트
- 3XX 리스폰스는 리퀘스트가 정상적으로 처리를 종료하기 위해 브라우저 측에서 특별한 처리를 수행해야 함을 나타낸다.
- **301 Moved Permanently**
  - 리퀘스트된 리소스에는 새로운 URI가 부여되어 있기 때문에 이후로는 그 리소스를 참조하는 URI를 사용해야 한단느 것을 나타낸다.
  - 북마크를 하고 있는 경우 Location 헤더 필드에서 가리키고 있는 URI에 북마크를 다시 하는게 좋다는 것을 나타낸다.
- **302 Found**
  - 리퀘스트된 리소스에는 새로운 URI가 할당되어 있기 때문에 그 URI를 참조하길 바란다는 의미를 담고 있다.
  - 301과 비슷하지만 302는 영구적인 이동이 아닌, 일시적인 이동이다.
- **303 See Other**
  - 리퀘스트에 대한 리소스는 다른 URI에 있기 때문에 GET 메소드를 사용해서 얻어야 한다는 것을 나타낸다.
  - 302와 같은 기능이지만, 리다이렉트 장소를 GET 메소드로 얻어야 한다고 명확하게 되어있는 점이 다르다.
> 301, 302, 303 리스폰스 코드가 되돌아오면, 대부분의 브라우저에서는 POST를 GET으로 바꾸어서 리퀘스트의 엔티티 바디를 삭제하고 리퀘스트를 자동적으로 재송신하도록 되어있다.
> 301, 302의 사양은 POST 메소드를 GET으로 바꾸는 것을 금지하고 있지만 구현해 놓은 것을 보면 대부분 이렇게 되어있다.

- **304 Not Modified**
  - 클라이언트가 조건부 리퀘스트를 했을 때 리소스에 대한 액세스는 허락하지만, 조건이 충족되지 않음을 표시한다.
  - 304를 돌려줄 때는 바디에는 아무 값도 없어야 한다.
  - 리다이렉트와는 관련이 없다.

<br>

## 클라이언트 에러
- 4XX 리스폰스는 클라이언트의 원인으로 에러가 발생했음을 나타낸다.
- **400 Bad Request**
  - 리퀘스트 구문이 잘못되었음을 나타낸다.
  - 브라우저는 이를 200 OK와 같이 취급한다.
- **401 Unauthorized**
  - 리퀘스트에 HTTP 인증(BASIC 인증..)이 필요하다는 것을 나타낸다.
- **403 Forbidden**
  - 리퀘스트된 리소스의 액세스가 거부되었음을 나타낸다.
  - 403이 발생한 원인으로는 파일 시스템의 퍼미션이 부여되지 않은 경우와 액세스 권한에 문제(허가되지 않은 송신 IP주소의 액세스) 등이 있다.
- **404 Not Found**
  - 리퀘스트한 리소스가 서버상에 없다는 것을 나타낸다.

<br>

## 서버 에러
- 5XX 리스폰스는 서버 원인으로 에러가 발생하고 있음을 나타낸다.
- **500 Internal Server Error**
  - 서버에서 리퀘스트를 처리하는 도중 에러가 발생했음을 나타낸다.
  - 웹 애플리케이션에 에러가 발생한 경우나 일시적인 경우도 있다.
- **503 Service Unavailable**
  - 서버가 과부하 상태이거나 점검중이기 때문에 현재 리퀘스트를 처리할 수 없음을 나타낸다.

> 상태 코드가 현재 상황가 불일치할 수도 있다.
> 리스폰스로 되돌아오는 상태 코드의 대부분은 유저가 다른 내용을 알기 어렵게 되어 있다. 흔히 있는 상황으로 웹 애플리케이션에서 애플리케이션 에러가 발생한 경우에도 상태 코드로는 [200 OK]가 되돌아오는 경우도 있다.